<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Source identifiers </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Source identifiers ">
    <meta name="generator" content="docfx 2.57.2.0">
    
    <link rel="shortcut icon" href="../../guide/favicon.png">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="../toc.html">
    
    <meta property="docfx:rel" content="../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../index.html">
                i2 <strong>Connect SDK</strong>
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list">Search results for <span></span></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination" data-first="First" data-prev="Previous" data-next="Next" data-last="Last"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show/hide table of contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
          
          <div class="subnav navbar navbar-default">
            <div class="container hide-when-search" id="breadcrumb">
              <ul class="breadcrumb">
                <li></li>
              </ul>
            </div>
          </div>
            <article class="content wrap" id="_content" data-uid="">
<h1 id="source-identifiers">Source identifiers</h1>

<p>In all versions of i2 Analyze, the ETL pipeline requires you to provide origin identifiers for incoming records through the ingestion mappings that you write. Developers of connectors for i2 Connect and plug-ins for i2 Analyst&#39;s Notebook can explicitly provide source identifiers for the records that they create.</p>
<p><strong>Note:</strong> For high-level descriptions of source identifiers and origin identifiers (and the differences between them), see <a href="https://docs.i2group.com/analyze/data_model_identifiers_is.html">Identifiers in i2 Analyze records</a>.</p>
<p>When you attach recognizable identifiers to the records that you create in connector code, you enable services to perform operations based on those identifiers. You also enable i2 Analyze clients and servers to perform matching on records that have a shared source.</p>
<p>The rules that govern the structure and contents of source identifiers are similar to - but not the same as - the rules for origin identifiers. Similar to their definitions, the rules for source identifiers are sometimes less restrictive than those for origin identifiers.</p>
<h2 id="the-structure-of-a-source-identifier">The structure of a source identifier</h2>
<p>A <a href="https://i2group.github.io/analyze-connect-node-sdk/api/i2connect.records.isourceidentifier.html">source identifier</a> contains a <em>type</em> and a <em>key</em>. If a source identifier is attached to a record that is subsequently uploaded to the Information Store, then the identifier is stored with that record in the database. As a result, there are limits on how much information types and keys can store.</p>
<h3 id="type">type</h3>
<p>The <em>type</em> of a source identifier allows the services in an i2 Analyze deployment to determine whether the source identifier is &quot;known&quot; to them - that is, that they can understand the key.</p>
<p>The value of the type element does not have to be meaningful, but should be unique to your services so that you avoid clashes with any third party services you might use.</p>
<ul>
<li><p>The length of the source identifier&#39;s type must not exceed 200 bytes, which is equivalent to 100 2-byte Unicode characters.</p>
</li>
<li><p>The following types are reserved and must not be used (case-insensitive):</p>
<ul>
<li><code>OI.IS</code></li>
<li><code>OI.DAOD</code></li>
<li><code>OI.ANB</code></li>
<li>Anything starting with <code>i2.</code></li>
</ul>
</li>
</ul>
<h3 id="key">key</h3>
<p>The <em>key</em> of a source identifier is an array containing the information necessary to reference the data in its source. The pieces of information that you use to make up the key differ depending on the source of the data.</p>
<ul>
<li><p>The total length of the source identifier&#39;s key must not exceed 692 bytes, which is equivalent to 346 2-byte Unicode characters.</p>
</li>
<li><p>The key is stored as a serialized JSON array, so additional characters appear alongside the actual key elements: two characters are required for the array braces, and two quotes are required for each element, with commas as separators between elements.</p>
<p>In other words, a key with <code>N</code> elements requires <code>3N + 1</code> characters of overhead. For example, the total length of <code>[&quot;a&quot;,&quot;bc&quot;,&quot;defg&quot;]</code> is 17 characters, while <code>[&quot;a,bc,defg&quot;]</code> is 13 characters. Also, if some special characters are present in a key element, they are escaped for storage. For example, <code>&quot;</code> becomes <code>\&quot;</code>, which further increases the size of the key.</p>
</li>
</ul>
<h2 id="using-source-identifiers">Using source identifiers</h2>
<p>When a service receives a seed record, it can inspect the source identifiers to find out whether a known type is present. If it is, then the key can be used to retrieve or match information from the source system.</p>
<p>When records are returned from external sources, the client can match them against other records by using the source identifiers (if source identifier matching is enabled in the match rules with <code>enableSourceIdentifierMatching=&quot;true&quot;</code>). Also, if source identifier matching is configured in the system match rules, then source identifiers provided through i2 Connect or Analyst&#39;s Notebook can be matched against the origin identifiers of records in the Information Store.</p>
<p>In both cases, source identifier matches occur when record item types match <em>and</em> the type and keys of the identifiers are an exact (case-sensitive) match.</p>
<p><strong>Note:</strong> After you upgrade to i2 Analyze 4.3.5 (or later) from a previous release, if you want to match against the origin identifiers of already-ingested records, you must build a new match index.</p>
<h2 id="limitations">Limitations</h2>
<p>There is a limit on the number of unique source identifiers that you can add to a record in the Information Store. The default limit is 50, but you can modify it by adding <code>MaxSourceIdentifiersPerRecord=N</code> (where <code>N</code> is a positive integer) to the <code>DiscoServerSettingsCommon.properties</code> file.</p>
<p><em>Origin</em> identifiers are not stored in chart records. As a result, they are not present as source identifiers on seeds that are sent to connectors or Analyst&#39;s Notebook plug-ins. Only source identifiers that have been added to records through the mechanism described here are present.</p>
<p>Connectors that specify source identifiers are API-compatible with older versions of the i2 Connect gateway and Analyst&#39;s Notebook, but those products will not recognize new source identifiers as such. Rather, they will treat source identifiers as ordinary identifiers, or ignore them. To use source identifiers to their full potential, upgrade all products to the latest release at your earliest opportunity.</p>
<h2 id="setting-a-source-identifier">Setting a source identifier</h2>
<p>To add a source identifier to an entity or a link, call the <a href="https://i2group.github.io/analyze-connect-node-sdk/api/i2connect.services.iresult.addentity_1.html"><code>addEntity()</code></a> or <a href="https://i2group.github.io/analyze-connect-node-sdk/api/i2connect.services.iresult.addlink_1.html"><code>addLink()</code></a> functions with details of the source identifier from within the service&#39;s <code>acquire()</code> callback function.</p>
<p>For example, see the calls to <code>result.addEntity(Complaint, nypdComplaintSourceId)</code> and <code>result.addLink(Victimof, nypdLinkSourceId, victimEntity, complaintEntity)</code> in the following code:</p>
<pre><code class="lang-ts">addService(
  {
    id: &#39;getVictims&#39;,
    name: &#39;NYPD Connector: Get all victims&#39;,
    description: &#39;A service that retrieves all the victim data.&#39;,
  },
  ({ result }) =&gt; {
    const nypdComplaintSourceId: records.ISourceIdentifier = {
      key: [&#39;Complaint&#39;, `1`],
      type: &#39;nypd-datasource&#39;,
    };
    const complaintEntity = result.addEntity(Complaint, nypdComplaintSourceId);

    const victimId = `Victim: 1`;
    const victimEntity = result.addEntity(Person, victimId);

    const nypdLinkSourceId: records.ISourceIdentifier = {
      key: [&#39;VictimOf&#39;, `1`],
      type: &#39;nypd-datasource&#39;,
    };
    result.addLink(Victimof, nypdLinkSourceId, victimEntity, complaintEntity);
  }
);
</code></pre><p><strong>Note:</strong> Not all entities and links require source identifiers. For example, the call that populates <code>victimEntity</code> uses the version of the <a href="https://i2group.github.io/analyze-connect-node-sdk/api/i2connect.services.iresult.addentity.html"><code>result.addEntity()</code></a> function that takes a simple string identifier.</p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In this article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            &copy; N. Harris Computer Corporation
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
